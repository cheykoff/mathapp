<div class="header">
  <h1 class="headerTitle" *ngIf="shared.mode === 'quiz'">
    Frage {{ currentQuestion + 1 }} von {{ this.shared.totalSessionQuestions }}
  </h1>
  <h1 class="headerTitle" *ngIf="shared.mode === 'practice'">
    {{ this.shared.topic }} {{ this.shared.chosenLevel }}:
    {{ currentQuestion + 1 }}/{{ this.shared.totalSessionQuestions }}
  </h1>
  <span id="studentId">ID: {{ this.shared.studentData.studentId }}</span>
  <div id="countdown" *ngIf="shared.mode === 'quiz'">
    {{ this.shared.counter | countDown }}
  </div>
</div>

<div class="main">
  <div *ngIf="this.shared.mode === 'practice'">
    <div class="question">
      <p [mathjax]="question"></p>
    </div>
    <form (ngSubmit)="onSubmitAnswer(f)" #f="ngForm">
      <div>
        <input
          class="answerText"
          type="number"
          id="givenAnswer"
          name="givenAnswer"
          placeholder=""
          [(ngModel)]="givenAnswer"
          [disabled]="isDisabled"
          required
          autofocus
          (focus)="onFocusEvent($event)"
          autocomplete="off"
        />
      </div>
      <button class="btn classBtn" type="submit" [disabled]="isDisabled">
        Antwort prüfen
      </button>
    </form>
  </div>

  <div *ngIf="this.shared.mode === 'quiz'">
    <app-question (onSubmit)="onSubmitAnswer(f, exercise)"></app-question>
  </div>
  <div class="feedback-wrapper">
    <div *ngIf="answerIsCorrect" class="correct">
      <p *ngIf="streakCount < 2; else streak" class="correctText feedback">
        Richtig!
      </p>
      <ng-template #streak>
        <p class="correctText feedback">Richtig! {{ streakCount }} in Folge!</p>
      </ng-template>
    </div>
    <div *ngIf="answerIsIncorrect" class="wrong">
      <div>
        <div class="incorrectText feedback">
          <p>Leider falsch!</p>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="attempts >= maxAttempts && answerIsIncorrect">
    <div *ngIf="this.shared.mode === 'quiz'">
      <p
        *ngIf="
          exercises[currentQuestion].answerType === 'integer' ||
          exercises[currentQuestion].answerType === 'dynamic'
        "
      >
        Die richtige Antwort wäre
        {{ exercises[currentQuestion].correctAnswer }} gewesen.
      </p>
      <div *ngIf="exercises[currentQuestion].answerType === 'fraction'">
        <p>
          Die richtige Antwort wäre
          {{ exercises[currentQuestion].correctAnswerFraction.numerator }}
          /
          {{ exercises[currentQuestion].correctAnswerFraction.denominator }}
          gewesen.
        </p>
      </div>
    </div>
    <p *ngIf="this.shared.mode === 'practice'">
      Die richtige Antwort wäre {{ answer }} gewesen.
    </p>
  </div>
  <button
    *ngIf="this.showNextButton"
    class="btn classBtn"
    (click)="nextExercise()"
    type="submit"
  >
    Nächste Frage
  </button>
</div>
